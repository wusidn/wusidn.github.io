<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Three框架</title>
        <script src="script/three.js"></script>
        <script src="script/stats.min.js"></script>
        <script src="script/Tween.js"></script>
        
        
        <style type="text/css">
        *{ padding: 0; margin: 0;}
            div#canvas-frame {
                border: none;
                cursor: pointer;
                width: 100%;
                height: 600px;
                background-color: #EEEEEE;
            }

        </style>
        <script>
            var renderer;
            var stats = new Stats();
            function initThree() {
                width = document.getElementById('canvas-frame').clientWidth;
                height = document.getElementById('canvas-frame').clientHeight;
                renderer = new THREE.WebGLRenderer({
                    antialias : true
                });
                renderer.setSize(width, height);
                document.getElementById('canvas-frame').appendChild(renderer.domElement);
                renderer.setClearColor(0x000000, 1.0);

                //初始化FPS监视器  
                stats.setMode(0); // 0: fps, 1: ms
                // 将stats的界面对应左上角
                stats.domElement.style.position = 'absolute';
                stats.domElement.style.left = '0px';
                stats.domElement.style.top = '0px';
                document.body.appendChild( stats.domElement );

            }

            var camera;
            function initCamera() {

                //正交投影
                // camera = new THREE.OrthographicCamera(width / 2, width / -2, height / 2, height / -2, 1, 10000);
                //透视投影
                camera = new THREE.PerspectiveCamera(36, width / height, 1, 10000);
                camera.position.x = 0;
                camera.position.y = 0;
                camera.position.z = 600;
                camera.up.x = 0;
                camera.up.y = 1;
                camera.up.z = 0;
                camera.lookAt({
                    x : 0,
                    y : 0,
                    z : 0
                });
            }

            var scene;
            function initScene() {
                scene = new THREE.Scene();
            }

            var light;
            function initLight() {
                light = new THREE.DirectionalLight(0xFFFFFF, 1.0, 0);
                light.position.set(100, 100, 200);
                scene.add(light);
            }


            var lines = [];
            function initObject() {

                var material = new THREE.LineBasicMaterial( { vertexColors: true } );

                //画网格
                for(var i = 0; i < 40; ++i){
                    var geometry = new THREE.Geometry();

                    geometry.vertices.push(new THREE.Vector3(-1000 + 50 * i, -1000, 0));
                    geometry.vertices.push(new THREE.Vector3(-1000 + 50 * i, 1000, 0));

                    geometry.colors.push(new THREE.Color(0x666666), new THREE.Color(0x666666));

                    var line = new THREE.Line( geometry, material, THREE.LinePieces );
                    scene.add(line);
                }

                for(var i = 0; i < 40; ++i){
                    var geometry = new THREE.Geometry();

                    geometry.vertices.push(new THREE.Vector3(-1000, -1000 + 50 * i, 0));
                    geometry.vertices.push(new THREE.Vector3(1000, -1000 + 50 * i, 0));

                    geometry.colors.push(new THREE.Color(0x666666), new THREE.Color(0x666666));

                    var line = new THREE.Line( geometry, material, THREE.LinePieces );
                    scene.add(line);
                }


                var points = [
                    new THREE.Vector3(-100, -100, -100),
                    new THREE.Vector3(100, -100, -100),
                    new THREE.Vector3(100, 100, -100),
                    new THREE.Vector3(-100, 100, -100),
                    new THREE.Vector3(-100, -100, 100),
                    new THREE.Vector3(100, -100, 100),
                    new THREE.Vector3(100, 100, 100),
                    new THREE.Vector3(-100, 100, 100)
                ];

                var colors = [
                    new THREE.Color( 0xFF0000 ),
                    new THREE.Color( 0x00FF00 ),
                    new THREE.Color( 0x0000FF ),
                    new THREE.Color( 0xFFFF00 ),
                    new THREE.Color( 0x00FFFF ),
                    new THREE.Color( 0x0FF0F0 ),
                    new THREE.Color( 0x0FF000 ),
                    new THREE.Color( 0x0FFFF0 )
                ];

                for(var i = 0; i < points.length; ++i){
                    for(var j = 0; j < points.length; ++j){

                        var flag = 0;

                        points[i].x === points[j].x && ++flag;
                        points[i].y === points[j].y && ++flag;
                        points[i].z === points[j].z && ++flag;

                        if(flag !== 2) continue;


                        var geometry = new THREE.Geometry();
                        geometry.vertices.push(points[i], points[j]);

                        geometry.colors.push(colors[i], colors[j]);

                        var line = new THREE.Line( geometry, material, THREE.LinePieces );
                        lines.push(line);
                        scene.add(line);
                    }
                }

                new TWEEN.Tween(camera.position).to({x: 200}, 10000).repeat( Infinity ).start();
            }


            function render(){

                for(var i = 0; i < lines.length; ++i){
                    lines[i].rotation.x += Math.PI / 180;
                    lines[i].rotation.y += Math.PI / 180;
                    // lines[i].rotation.z += Math.PI / 180;
                }
            }

            function animation(){

                render();
                
                renderer.render(scene, camera);
                requestAnimationFrame(animation);

                stats.update();
                TWEEN.update();
            }

            function threeStart() {
                initThree();
                initCamera();
                initScene();
                initLight();
                initObject();

                animation();
            }

        </script>
    </head>

    <body onload="threeStart();">
        <div id="canvas-frame"></div>
    </body>
</html>