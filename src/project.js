window.__require=function t(e,i,o){function n(a,r){if(!i[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var h="function"==typeof __require&&__require;if(!r&&h)return h(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+a+"'")}}var d=i[a]={exports:{}};e[a][0].call(d.exports,function(t){return n(e[a][1][t]||t)},d,d.exports,t,e,i,o)}return i[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({cannonBall:[function(t,e,i){"use strict";cc._RF.push(e,"436b9zPc2FGYqI6GKqlE7fr","cannonBall"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./load"),n=cc._decorator,c=n.ccclass,a=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.posX=0,e}var i;return __extends(e,t),i=e,e.createCannonBall=function(){var t=null;if(i.s_cannonBallPool.length)t=i.s_cannonBallPool.pop();else{var e=new cc.Node;e.addComponent(i),t=e.getComponent(i)}return t},e.releaseCannonBall=function(t){t.node.removeFromParent(),i.s_cannonBallPool.push(t)},e.prototype.start=function(){var t=o.default.getSpriteAtlas("first");this.node.addComponent(cc.Sprite),this.node.getComponent(cc.Sprite).spriteFrame=t.getSpriteFrame("cannonball")},e.s_cannonBallPool=new Array,__decorate([a(Number)],e.prototype,"posX",void 0),e=i=__decorate([c],e)}(cc.Component);i.default=r,cc._RF.pop()},{"./load":"load"}],frist:[function(t,e,i){"use strict";cc._RF.push(e,"75653f3iGRBc6kjnSs/MBHT","frist"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./rock"),n=t("./tank"),c=t("./cannonBall"),a=cc._decorator,r=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameTime=0,e.touchLocation=null,e.tank=null,e.fire=!1,e.fireTime=0,e.fireSpace=1,e.cannonBallSpeed=1500,e.cannonBallList=new Array,e.randomRockTime=0,e.rockList=new Array,e}return __extends(e,t),e.prototype.ctor=function(){console.log(this.node.getContentSize())},e.prototype.start=function(){var t=cc.director.getScene(),e=cc.v2(.5*cc.winSize.width,220);this.node.on(cc.Node.EventType.TOUCH_START,this.touchBegin,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this);var i=new cc.Node;i.addComponent(n.default),i.position=e,t.addChild(i),this.tank=i.getComponent(n.default),i.setSiblingIndex(3)},e.prototype.touchBegin=function(t){this.touchLocation=t.getLocation(),this.fire=!0,this.fireTime=this.fireSpace},e.prototype.touchMove=function(t){var e=t.getLocation();this.tank.tankPosition=this.tank.tankPosition.add(cc.v2(e.x-this.touchLocation.x,0));var i=.5*this.tank.node.getContentSize().width;this.tank.tankPosition.x<i&&(this.tank.tankPosition.x=i);var o=this.node.getContentSize().width-i;this.tank.tankPosition.x>o&&(this.tank.tankPosition.x=o),this.touchLocation=e},e.prototype.touchEnd=function(t){this.fire=!1},e.prototype.update=function(t){this.gameTime+=t;for(var e=new Array;this.cannonBallList.length;){var i=(d=this.cannonBallList.pop()).node.position,n=d.posX.valueOf()-i.x;if(0!=n){var a=500*t;a=a>Math.abs(n)?Math.abs(n):a,i.x+=(n>0?1:-1)*a}i.y+=this.cannonBallSpeed.valueOf()*t,i.y>cc.winSize.height+d.node.getContentSize().height?c.default.releaseCannonBall(d):(d.node.position=i,e.push(d))}if(this.cannonBallList=e,this.fire&&(this.fireTime=this.fireTime.valueOf()+1,this.fireTime>=this.fireSpace)){this.fireTime=0;for(var r=cc.director.getScene(),s=this.tank.node.position.add(cc.v2(0,this.tank.node.getContentSize().height+15)),h=0;h<5;++h){var d;(d=c.default.createCannonBall()).node.position=s,d.posX=s.x+20*(h%2?-1:1)*Math.ceil(h/2),r.addChild(d.node),d.node.setSiblingIndex(1),this.cannonBallList.push(d)}}if(this.gameTime.valueOf()-this.randomRockTime.valueOf()>5){this.randomRockTime=this.gameTime;r=cc.director.getScene();var l=Math.ceil(2*Math.random());for(h=0;h<l;++h)if(!(this.rockList.length>5)){var p=Math.floor(2*Math.random()),u=Math.floor(4*Math.random()),f=Math.floor(99500*Math.random())+500,v=new cc.Node;v.addComponent(o.default);var _=v.getComponent(o.default);_.lor=0==p,_.hitPointMax=f,_.level=u,_.automatic=!0,r.addChild(v),this.rockList.push(_)}}},e=__decorate([r],e)}(cc.Component));i.default=s,cc._RF.pop()},{"./cannonBall":"cannonBall","./rock":"rock","./tank":"tank"}],load:[function(t,e,i){"use strict";cc._RF.push(e,"031cePbdaNAOr3KY8G/2B7k","load"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,n=o.ccclass,c=(o.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.t_loadAtldasCount=0,e}var i;return __extends(e,t),i=e,e.getSpriteAtlas=function(t){return i.s_spriteAtldasList[t]},e.prototype.start=function(){var t=this;this.t_loadAtldasCount=0;for(var e=function(e){var o=i.s_loadAtldasSrcs[e];cc.loader.loadRes(o,cc.SpriteAtlas,function(e,n){e&&console.log("---\x3e load err: ",e),i.s_spriteAtldasList[o]=n,++t.t_loadAtldasCount==i.s_loadAtldasSrcs.length&&cc.director.loadScene("first")})},o=0;o<i.s_loadAtldasSrcs.length;++o)e(o)},e.s_loadAtldasSrcs=["first"],e.s_spriteAtldasList=new Map,e=i=__decorate([n],e)}(cc.Component));i.default=c,cc._RF.pop()},{}],rock:[function(t,e,i){"use strict";cc._RF.push(e,"6280ejDCVlIp7H3hTL7yGIC","rock"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./load"),n=cc._decorator,c=n.ccclass,a=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.direction=null,e.automatic=!1,e.lor=!1,e.hitPointMax=876,e.level=0,e.hitPoint=876,e.rect=null,e.speed=0,e.acceleration=6,e.elasticity=600,e.rotationSpeed=-.6,e.hiPointLabel=null,e.rockSprite=null,e}return __extends(e,t),e.create=function(){return new cc.Node},e.prototype.start=function(){this.hitPoint=this.hitPointMax.valueOf();var t=cc.winSize;this.rect=cc.rect(0,220,t.width,t.height-220),this.lor?(this.direction=cc.v2(0,-1).rotate(Math.PI/180*10),this.node.position=cc.v2(200,700)):(this.direction=cc.v2(0,-1).rotate(Math.PI/180*-10),this.node.position=cc.v2(400,700)),this.node.addComponent(cc.Sprite),this.rockSprite=this.node.getComponent(cc.Sprite),this.rockSprite.node.setScale(.3+.2*this.level),this.acceleration=6-.5*this.level,this.rockSprite.spriteFrame=o.default.getSpriteAtlas("first").getSpriteFrame("diamond_"+this.level);var e=new cc.Node;e.addComponent(cc.Label),this.hiPointLabel=e.getComponent(cc.Label),this.hiPointLabel.fontSize=60,this.hiPointLabel.lineHeight=60,this.hiPointLabel.string=this.hitPoint.toString(),e.position=cc.v2(-10,-20),this.node.addChild(this.hiPointLabel.node)},e.prototype.update=function(t){var e=this;if(this.automatic){var i=this.node.getPosition();this.direction.y<0?this.speed+=this.acceleration:this.speed-=this.acceleration,this.speed<=0&&(this.speed=0),this.rockSprite.node.rotation+=this.rotationSpeed;var o=function(){var o=t*e.speed,n=cc.size(e.direction.x*t*500,e.direction.y*o);return cc.v2(i.x+n.width,i.y+n.height)},n=o(),c=this.rockSprite.node.getContentSize(),a=this.rockSprite.node.getScale();c=cc.v2(c.width,c.height).scale(cc.v2(a,a));var r=cc.size(.5*c.x,.5*c.y),s=cc.v2(n.x-r.width,n.y-r.height),h=cc.rect(s.x,s.y,c.x,c.y),d=0;this.rect.containsRect(h)||(n.y-r.height<this.rect.y?(d=this.direction.x<0?-this.direction.angle(cc.v2(-1,0)):this.direction.angle(cc.v2(1,0)),this.speed=this.elasticity):n.x-r.width<this.rect.x?d=this.direction.y>0?-this.direction.angle(cc.v2(0,1)):this.direction.angle(cc.v2(0,-1)):n.x+r.width>this.rect.x+this.rect.width&&(d=this.direction.y>0?this.direction.angle(cc.v2(0,1)):-this.direction.angle(cc.v2(0,-1))),this.direction=this.direction.rotate(2*d),n=n=o()),0==this.speed&&(d=this.direction.x<0?this.direction.angle(cc.v2(-1,0)):-this.direction.angle(cc.v2(1,0)),this.direction=this.direction.rotate(2*d),n=n=o()),this.node.setPosition(n)}},__decorate([a(cc.Vec2)],e.prototype,"direction",void 0),__decorate([a(Boolean)],e.prototype,"automatic",void 0),__decorate([a(Boolean)],e.prototype,"lor",void 0),__decorate([a(Number)],e.prototype,"hitPointMax",void 0),e=__decorate([c],e)}(cc.Component);i.default=r,cc._RF.pop()},{"./load":"load"}],tank:[function(t,e,i){"use strict";cc._RF.push(e,"a3fc1mZPhxElLuGXwHNFCIY","tank"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./load"),n=cc._decorator,c=n.ccclass,a=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cannon=null,e.wheelLeft=null,e.wheelRight=null,e.tankPosition=null,e.wheelRadianLength=0,e}return __extends(e,t),e.prototype.start=function(){var t=o.default.getSpriteAtlas("first");this.tankPosition=this.node.position;var e=new cc.Node;e.addComponent(cc.Sprite),this.node.addChild(e),this.cannon=e.getComponent(cc.Sprite),this.cannon.spriteFrame=t.getSpriteFrame("cannon");var i=e.getContentSize();e.position=e.position.add(cc.v2(0,.5*i.height));var n=new cc.Node;n.addComponent(cc.Sprite),this.node.addChild(n),this.wheelLeft=n.getComponent(cc.Sprite),this.wheelLeft.spriteFrame=t.getSpriteFrame("wheel");var c=new cc.Node;c.addComponent(cc.Sprite),this.node.addChild(c);var a=n.getContentSize();this.wheelRadianLength=a.width*Math.PI/360,this.wheelRight=c.getComponent(cc.Sprite),this.wheelRight.spriteFrame=t.getSpriteFrame("wheel"),n.position=n.position.add(cc.v2(-30,.5*a.height)),c.position=c.position.add(cc.v2(30,.5*a.height)),e.position=e.position.add(cc.v2(0,.5*a.height)),this.node.setContentSize(cc.size(60+a.width,.5*a.height+i.height))},e.prototype.update=function(t){var e=this.node.position;if(this.tankPosition.sub(e).mag()>20){var i=cc.v2(this.tankPosition.x-e.x,0).normalize();this.node.position=cc.v2(e.x+i.x*t*2e3,e.y)}else this.node.position=this.tankPosition;var o=this.node.position.sub(e).x/this.wheelRadianLength;this.wheelLeft.node.rotation+=o,this.wheelRight.node.rotation+=o},__decorate([a(cc.Sprite)],e.prototype,"cannon",void 0),__decorate([a(cc.Sprite)],e.prototype,"wheelLeft",void 0),__decorate([a(cc.Sprite)],e.prototype,"wheelRight",void 0),__decorate([a(cc.Vec2)],e.prototype,"tankPosition",void 0),e=__decorate([c],e)}(cc.Component);i.default=r,cc._RF.pop()},{"./load":"load"}]},{},["cannonBall","frist","load","rock","tank"]);